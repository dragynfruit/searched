{% import "components/search_bar.html" as search_bar %}
{% extends "base.html" %}

{% block title %}{{ query }} | Searched{% endblock title %}

{% block head %}
{{ super() }}
{{ search_bar::generate_style() }}
{% endblock head %}

{% block content %}
<table class="search-header">
	<tr>
		<td>
			<a href="/">
				<img src="assets/logo.png" />
			</a>
		</td>
		<td>
			<h3 style="margin-left: -8pt;"><a href="/">Searched</a></h3>
		</td>
		<td>
			{{ search_bar::generate_content(value=query) }}
		</td>
	</tr>
	<tr>
		<td colspan="3">
			<table class=".kinds">
				<tr>
					<td><a href="?q={{ query }}">General</a></td>
					<td><a href="?q={{ query }}&k=imgs">Images</a></td>
					<td><a href="?q={{ query }}&k=vids">Videos</a></td>
					<td><a href="?q={{ query }}&k=news">News</a></td>
					<td><a href="?q={{ query }}&k=maps">Maps</a></td>
					<td><a href="?q={{ query }}&k=docs">Documentation</a></td>
					<td><a href="?q={{ query }}&k=pprs">Papers</a></td>
				</tr>
			</table>
		</td>
	</tr>
</table>

<div class="results">
	{% for result in results %}
		<div>
			<h3><a href="{{ result.url | safe }}" target="_blank">{{ result.title | safe }}</a></h3>
			{% if result.general -%}
				<p>{{ result.general.snippet | safe }}</p>
			{%- endif %}
		</div>
	{% else %}
		<div>
			<h2><b>No results</b></h2>
			<p>Sorry :')</p>
		</div>
	{% endfor %}
</div>

<a href="?q={{ query }}&s=duckduckgo&p={{ page+1 }}">{{ page+1 }}</a>
{% set pages = (count / 20) | round(method="ceil") | int %}
{% for i in range(end=pages) %}
<a href="?q={{ query }}&p={{ i }}">{{ i }}</a>
{% endfor %}
{% endblock content %}

{% block footer %}
<p>Parse took {{ parse_time | round(precision=3) }} ms. Search took {{ search_time | round(precision=3) }} ms. Gathering took {{ gather_time | round(precision=3) }} ms.</p>
{% endblock footer %}
